"use strict";(self.webpackChunk_react_native_video_docs=self.webpackChunk_react_native_video_docs||[]).push([["9164"],{4453:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>s,toc:()=>c,default:()=>h,metadata:()=>r,assets:()=>o,contentTitle:()=>d});var r=JSON.parse('{"id":"updating","title":"Updating","description":"React Native Video Updating Guide","source":"@site/docs/updating.md","sourceDirName":".","slug":"/updating","permalink":"/react-native-video/docs/v7/updating","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Updating","description":"React Native Video Updating Guide","sidebar_class_name":"hidden"},"sidebar":"docsSidebar","previous":{"title":"Useful Projects","permalink":"/react-native-video/docs/v7/projects"},"next":{"title":"Useful Projects","permalink":"/react-native-video/docs/v7/projects"}}'),i=t(4848),l=t(6151);let s={title:"Updating",description:"React Native Video Updating Guide",sidebar_class_name:"hidden"},d,o={},c=[{value:"Upgrading from react-native-video v6 to v7",id:"upgrading-from-react-native-video-v6-to-v7",level:2},{value:"Key Changes in v7",id:"key-changes-in-v7",level:3},{value:"New Dependency",id:"new-dependency",level:3},{value:"Step-by-Step Migration Guide",id:"step-by-step-migration-guide",level:3},{value:"1. Installation",id:"1-installation",level:4},{value:"2. Updating Your Component",id:"2-updating-your-component",level:4},{value:"Prop and Method Migration",id:"prop-and-method-migration",level:3},{value:"Common Props",id:"common-props",level:4},{value:"Methods",id:"methods",level:4},{value:"Event Handling",id:"event-handling",level:3},{value:"Benefits of the New Architecture",id:"benefits-of-the-new-architecture",level:3}];function a(e){let n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"upgrading-from-react-native-video-v6-to-v7",children:"Upgrading from react-native-video v6 to v7"}),"\n",(0,i.jsxs)(n.p,{children:["Version 7 of ",(0,i.jsx)(n.code,{children:"react-native-video"})," introduces a significant architectural shift, separating the video player logic from the UI rendering. This change unlocks new capabilities like video preloading and a more intuitive, hook-based API. This guide will walk you through the necessary steps to migrate your application from v6 to v7."]}),"\n",(0,i.jsx)(n.h3,{id:"key-changes-in-v7",children:"Key Changes in v7"}),"\n",(0,i.jsxs)(n.p,{children:["The most substantial change in v7 is the move from a monolithic ",(0,i.jsx)(n.code,{children:"<Video>"})," component to a more modular approach with two distinct components:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"VideoPlayer"})}),": A new class that manages the player's state and playback logic. It is not a UI component."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"VideoView"})}),": A UI component responsible for rendering the video on the screen. It takes a ",(0,i.jsx)(n.code,{children:"VideoPlayer"})," instance as a prop."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.strong,{children:[(0,i.jsx)(n.code,{children:"useVideoPlayer"})," hook"]}),": The recommended way to create and manage the lifecycle of a ",(0,i.jsx)(n.code,{children:"VideoPlayer"})," instance within a functional component. It automatically handles the creation and cleanup of the player."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"new-dependency",children:"New Dependency"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"react-native-video"})," v7 is now built on top of ",(0,i.jsx)(n.a,{href:"https://nitro.margelo.com/docs/what-is-nitro",children:(0,i.jsx)(n.code,{children:"react-native-nitro-modules"})})," framework. This means that you need to install the Nitro framework to use ",(0,i.jsx)(n.code,{children:"react-native-video"})," v7."]}),"\n",(0,i.jsx)(n.h3,{id:"step-by-step-migration-guide",children:"Step-by-Step Migration Guide"}),"\n",(0,i.jsx)(n.h4,{id:"1-installation",children:"1. Installation"}),"\n",(0,i.jsxs)(n.p,{children:["First, update the ",(0,i.jsx)(n.code,{children:"react-native-video"})," package to the latest v7 release:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm install react-native-video@next --save\n"})}),"\n",(0,i.jsx)(n.p,{children:"Then, install the pods for iOS:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd ios && pod install\n"})}),"\n",(0,i.jsx)(n.h4,{id:"2-updating-your-component",children:"2. Updating Your Component"}),"\n",(0,i.jsxs)(n.p,{children:["The core of the migration involves replacing the ",(0,i.jsx)(n.code,{children:"<Video>"})," component with the new ",(0,i.jsx)(n.code,{children:"useVideoPlayer"})," hook and ",(0,i.jsx)(n.code,{children:"<VideoView>"})," component."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"v6 Implementation:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jsx",children:"import React, { useRef } from 'react';\nimport Video from 'react-native-video';\n\nconst VideoPlayerV6 = () => {\n  const videoRef = useRef(null);\n\n  return (\n    <Video\n      source={{ uri: 'https://www.w3schools.com/html/mov_bbb.mp4' }}\n      ref={videoRef}\n      style={{ width: 300, height: 200 }}\n      controls={true}\n      onLoad={() => console.log('Video loaded')}\n      onProgress={(data) => console.log('Progress:', data.currentTime)}\n    />\n  );\n};\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"v7 Implementation:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jsx",children:"import React from 'react';\nimport { useVideoPlayer, VideoView, useEvent } from 'react-native-video';\n\nconst VideoPlayerV7 = () => {\n  const player = useVideoPlayer({\n    source: {\n      uri: 'https://www.w3schools.com/html/mov_bbb.mp4',\n    },\n  });\n\n  useEvent(player, 'onLoad', () => {\n    console.log('Video loaded');\n  });\n\n  useEvent(player, 'onProgress', (data) => {\n    console.log('Progress:', data.currentTime);\n  });\n\n  return (\n    <VideoView\n      player={player}\n      style={{ width: 300, height: 200 }}\n      controls={true}\n    />\n  );\n};\n"})}),"\n",(0,i.jsx)(n.h3,{id:"prop-and-method-migration",children:"Prop and Method Migration"}),"\n",(0,i.jsxs)(n.p,{children:["Many props and methods from the v6 ",(0,i.jsx)(n.code,{children:"<Video>"})," component have been moved to the ",(0,i.jsx)(n.code,{children:"VideoPlayer"})," instance in v7."]}),"\n",(0,i.jsx)(n.h4,{id:"common-props",children:"Common Props"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsxs)(n.th,{style:{textAlign:"left"},children:["v6 Prop (",(0,i.jsx)(n.code,{children:"<Video>"}),")"]}),(0,i.jsxs)(n.th,{style:{textAlign:"left"},children:["v7 Equivalent (",(0,i.jsx)(n.code,{children:"VideoPlayer"})," properties)"]}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Notes"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"source"})}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,i.jsx)(n.code,{children:"source"})," property in ",(0,i.jsx)(n.code,{children:"useVideoPlayer"})," config"]}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"The structure of the source object remains largely the same."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"paused"})}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,i.jsx)(n.code,{children:"paused"})," property on the ",(0,i.jsx)(n.code,{children:"VideoPlayer"})," instance"]}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["Can be controlled via ",(0,i.jsx)(n.code,{children:"player.pause()"})," and ",(0,i.jsx)(n.code,{children:"player.play()"}),"."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"muted"})}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,i.jsx)(n.code,{children:"muted"})," property on the ",(0,i.jsx)(n.code,{children:"VideoPlayer"})," instance"]}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"player.muted = true/false;"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"volume"})}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,i.jsx)(n.code,{children:"volume"})," property on the ",(0,i.jsx)(n.code,{children:"VideoPlayer"})," instance"]}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"player.volume = 0.5;"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"rate"})}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,i.jsx)(n.code,{children:"rate"})," property on the ",(0,i.jsx)(n.code,{children:"VideoPlayer"})," instance"]}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"player.rate = 1.5;"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"loop"})}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,i.jsx)(n.code,{children:"loop"})," property on the ",(0,i.jsx)(n.code,{children:"VideoPlayer"})," instance"]}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"player.loop = true;"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"resizeMode"})}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,i.jsx)(n.code,{children:"resizeMode"})," prop on ",(0,i.jsx)(n.code,{children:"<VideoView>"})]}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"This remains a prop on the UI component."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"controls"})}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,i.jsx)(n.code,{children:"controls"})," prop on ",(0,i.jsx)(n.code,{children:"<VideoView>"})]}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"This also remains on the UI component."})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["see ",(0,i.jsx)(n.a,{href:"/react-native-video/docs/v7/player/",children:"VideoPlayer"})," for more details."]}),"\n",(0,i.jsx)(n.h4,{id:"methods",children:"Methods"}),"\n",(0,i.jsxs)(n.p,{children:["Imperative methods previously called on the ",(0,i.jsx)(n.code,{children:"<Video>"})," component's ref are now methods on the ",(0,i.jsx)(n.code,{children:"VideoPlayer"})," instance."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsxs)(n.th,{style:{textAlign:"left"},children:["v6 Method (",(0,i.jsx)(n.code,{children:"videoRef.current"}),")"]}),(0,i.jsxs)(n.th,{style:{textAlign:"left"},children:["v7 Equivalent (",(0,i.jsx)(n.code,{children:"player"}),")"]})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"seek(time)"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"player.seekTo(time)"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"presentFullscreenPlayer()"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"videoViewRef.current.enterFullscreen()"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"dismissFullscreenPlayer()"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"videoViewRef.current.exitFullscreen()"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"pause()"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"player.pause()"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"resume()"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"player.play()"})})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["see ",(0,i.jsx)(n.a,{href:"/react-native-video/docs/v7/player/",children:"VideoPlayer"})," for more details."]}),"\n",(0,i.jsx)(n.h3,{id:"event-handling",children:"Event Handling"}),"\n",(0,i.jsxs)(n.p,{children:["In v7, event handling is standardized through the ",(0,i.jsx)(n.code,{children:"useEvent"})," hook or by directly assigning callbacks to the ",(0,i.jsx)(n.code,{children:"VideoPlayer"})," instance. The ",(0,i.jsx)(n.code,{children:"useEvent"})," hook is recommended as it automatically handles listener cleanup."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"v6 Event Handling:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jsx",children:"<Video\n  onLoad={(data) => console.log(data)}\n  onProgress={(data) => console.log(data.currentTime)}\n  onError={(error) => console.error(error)}\n/>\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["v7 Event Handling with ",(0,i.jsx)(n.code,{children:"useEvent"}),":"]})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jsx",children:"import { useVideoPlayer, VideoView, useEvent } from 'react-native-video';\n\nconst MyPlayer = () => {\n  const player = useVideoPlayer({ source: { uri: '...' } });\n\n  useEvent(player, 'onLoad', (data) => console.log(data));\n  useEvent(player, 'onProgress', (data) => console.log(data.currentTime));\n  useEvent(player, 'onError', (error) => console.error(error.code, error.message));\n\n  return <VideoView player={player} />;\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Directly assigning callbacks in v7:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jsx",children:"const player = useVideoPlayer('https://example.com/video.mp4', (_player) => {\n  _player.onLoad = (data) => {\n    console.log('Video loaded! Duration:', data.duration);\n  };\n  _player.onError = (error) => {\n    console.error('Player Error:', error.code, error.message);\n  };\n});\n"})}),"\n",(0,i.jsx)(n.h3,{id:"benefits-of-the-new-architecture",children:"Benefits of the New Architecture"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Preloading"}),": You can create a ",(0,i.jsx)(n.code,{children:"VideoPlayer"})," instance and begin loading a video before it's visible in the UI. When you're ready to display it, simply pass the player instance to a ",(0,i.jsx)(n.code,{children:"<VideoView>"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Improved Performance"}),": Separating the player logic from the UI rendering can lead to better performance and a more responsive application."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Cleaner API"}),": The hook-based API simplifies player management and reduces boilerplate code, especially for handling the player's lifecycle."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Full New Architecture Support"}),": Version 7 fully embraces React Native's New Architecture, ensuring better performance and consistency."]}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},6151:function(e,n,t){t.d(n,{R:()=>s,x:()=>d});var r=t(6540);let i={},l=r.createContext(i);function s(e){let n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);