"use strict";(self.webpackChunk_react_native_video_docs=self.webpackChunk_react_native_video_docs||[]).push([["1437"],{4930:function(e,i,n){n.r(i),n.d(i,{frontMatter:()=>l,toc:()=>o,default:()=>h,metadata:()=>r,assets:()=>c,contentTitle:()=>t});var r=JSON.parse('{"id":"player/video-player","title":"VideoPlayer","description":"- useVideoPlayer hook - Recommended for most cases. Automatically manages player lifecycle (creation, cleanup on unmount, source changes).","source":"@site/docs/player/video-player.md","sourceDirName":"player","slug":"/player/video-player","permalink":"/react-native-video/docs/v7/player/video-player","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"sidebar_label":"VideoPlayer"},"sidebar":"docsSidebar","previous":{"title":"useVideoPlayer","permalink":"/react-native-video/docs/v7/player/use-video-player"},"next":{"title":"DRM","permalink":"/react-native-video/docs/v7/player/drm"}}'),d=n(4848),s=n(6151);let l={sidebar_position:3,sidebar_label:"VideoPlayer"},t="VideoPlayer",c={},o=[{value:"Initialization",id:"initialization",level:2},{value:"Core Functionality",id:"core-functionality",level:2},{value:"Playback Control",id:"playback-control",level:3},{value:"Properties",id:"properties",level:3},{value:"Error Handling",id:"error-handling",level:3},{value:"Buffer Config",id:"buffer-config",level:3},{value:"Android",id:"android",level:4},{value:"iOS, visionOS, tvOS",id:"ios-visionos-tvos",level:4},{value:"DRM",id:"drm",level:2},{value:"Player Lifecycle",id:"player-lifecycle",level:2},{value:"Creation and Initialization",id:"creation-and-initialization",level:3},{value:"Deferred Initialization (Advanced)",id:"deferred-initialization-advanced",level:4},{value:"Initialization Methods Comparison",id:"initialization-methods-comparison",level:4},{value:"Playing a Video",id:"playing-a-video",level:3},{value:"Controlling Playback",id:"controlling-playback",level:3},{value:"Changing Source",id:"changing-source",level:3},{value:"Releasing Resources",id:"releasing-resources",level:3},{value:"Error Handling",id:"error-handling-1",level:3},{value:"Using with Hooks (<code>useVideoPlayer</code>)",id:"using-with-hooks-usevideoplayer",level:3}];function a(e){let i={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(i.header,{children:(0,d.jsx)(i.h1,{id:"videoplayer",children:"VideoPlayer"})}),"\n",(0,d.jsx)(i.admonition,{title:"When to Use What",type:"tip",children:(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsxs)(i.strong,{children:[(0,d.jsx)(i.a,{href:"/react-native-video/docs/v7/player/use-video-player",children:(0,d.jsx)(i.code,{children:"useVideoPlayer"})})," hook"]})," - Recommended for most cases. Automatically manages player lifecycle (creation, cleanup on unmount, source changes)."]}),"\n",(0,d.jsxs)(i.li,{children:[(0,d.jsxs)(i.strong,{children:[(0,d.jsx)(i.code,{children:"VideoPlayer"})," class"]})," - Use when you need manual lifecycle control, e.g., preloading videos before displaying them, managing multiple players with custom logic, or deferred initialization scenarios."]}),"\n"]})}),"\n",(0,d.jsxs)(i.p,{children:["The ",(0,d.jsx)(i.code,{children:"VideoPlayer"})," class is the primary way to control video playback. It provides methods and properties to manage the video source, playback state, volume, and other aspects of the video."]}),"\n",(0,d.jsx)(i.h2,{id:"initialization",children:"Initialization"}),"\n",(0,d.jsxs)(i.p,{children:["To use the ",(0,d.jsx)(i.code,{children:"VideoPlayer"}),", you first need to create an instance of it with a video source. By default the native media item is initialized asynchronously right after creation (unless you opt out with ",(0,d.jsx)(i.code,{children:"initializeOnCreation: false"}),")."]}),"\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{className:"language-typescript",children:"import { VideoPlayer } from 'react-native-video';\n\n// Using a URL string\nconst player = new VideoPlayer('https://example.com/video.mp4');\n\n// Using a VideoSource object\nconst playerWithSource = new VideoPlayer({ uri: 'https://example.com/video.mp4' });\n\n// Using a VideoConfig object\nconst playerWithConfig = new VideoPlayer({\n  source: { uri: 'https://example.com/video.mp4' },\n  // other configurations\n});\n"})}),"\n",(0,d.jsx)(i.admonition,{type:"warning",children:(0,d.jsxs)(i.p,{children:["When using ",(0,d.jsx)(i.code,{children:"VideoPlayer"})," class directly, you need to manually manage the player lifecycle. Once you no longer need the player, you need to call ",(0,d.jsx)(i.code,{children:"release()"})," method to release the player's native resources. See the ",(0,d.jsx)(i.a,{href:"#player-lifecycle",children:"Player Lifecycle"})," section below for more details."]})}),"\n",(0,d.jsx)(i.h2,{id:"core-functionality",children:"Core Functionality"}),"\n",(0,d.jsxs)(i.p,{children:["The ",(0,d.jsx)(i.code,{children:"VideoPlayer"})," class offers a comprehensive set of methods and properties to control video playback:"]}),"\n",(0,d.jsx)(i.h3,{id:"playback-control",children:"Playback Control"}),"\n",(0,d.jsxs)(i.table,{children:[(0,d.jsx)(i.thead,{children:(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.th,{children:"Method"}),(0,d.jsx)(i.th,{children:"Description"})]})}),(0,d.jsxs)(i.tbody,{children:[(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"play()"})}),(0,d.jsx)(i.td,{children:"Starts or resumes video playback."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"pause()"})}),(0,d.jsx)(i.td,{children:"Pauses video playback."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"seekBy(time: number)"})}),(0,d.jsx)(i.td,{children:"Seeks the video forward or backward by the specified number of seconds."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"seekTo(time: number)"})}),(0,d.jsx)(i.td,{children:"Seeks the video to a specific time in seconds."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"replaceSourceAsync(source: VideoSource | VideoConfig | null)"})}),(0,d.jsxs)(i.td,{children:["Replaces the current video source with a new one. Pass ",(0,d.jsx)(i.code,{children:"null"})," to release the current source without replacing it."]})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"initialize()"})}),(0,d.jsxs)(i.td,{children:["Manually initialize the underlying native player item when ",(0,d.jsx)(i.code,{children:"initializeOnCreation"})," was set to ",(0,d.jsx)(i.code,{children:"false"}),". No-op if already initialized."]})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"preload()"})}),(0,d.jsx)(i.td,{children:"Ensures the media source is set and prepared (buffering started) without starting playback. If not yet initialized it will initialize first."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"release()"})}),(0,d.jsxs)(i.td,{children:["Releases the player's native resources. The player is no longer usable after calling this method. ",(0,d.jsx)(i.strong,{children:"Note:"})," If you intend to reuse the player instance with a different source, use ",(0,d.jsx)(i.code,{children:"replaceSourceAsync(null)"})," to clear resources instead of ",(0,d.jsx)(i.code,{children:"release()"}),"."]})]})]})]}),"\n",(0,d.jsx)(i.h3,{id:"properties",children:"Properties"}),"\n",(0,d.jsxs)(i.table,{children:[(0,d.jsx)(i.thead,{children:(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.th,{children:"Property"}),(0,d.jsx)(i.th,{children:"Access"}),(0,d.jsx)(i.th,{children:"Type"}),(0,d.jsx)(i.th,{children:"Description"})]})}),(0,d.jsxs)(i.tbody,{children:[(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"source"})}),(0,d.jsx)(i.td,{children:"Read-only"}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"VideoPlayerSource"})}),(0,d.jsxs)(i.td,{children:["Gets the current ",(0,d.jsx)(i.code,{children:"VideoPlayerSource"})," object."]})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"status"})}),(0,d.jsx)(i.td,{children:"Read-only"}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"VideoPlayerStatus"})}),(0,d.jsxs)(i.td,{children:["Gets the current status (e.g., ",(0,d.jsx)(i.code,{children:"playing"}),", ",(0,d.jsx)(i.code,{children:"paused"}),", ",(0,d.jsx)(i.code,{children:"buffering"}),")."]})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"duration"})}),(0,d.jsx)(i.td,{children:"Read-only"}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"number"})}),(0,d.jsxs)(i.td,{children:["Gets the total duration of the video in seconds. Returns ",(0,d.jsx)(i.code,{children:"NaN"})," until metadata is loaded."]})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"volume"})}),(0,d.jsx)(i.td,{children:"Read/Write"}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"number"})}),(0,d.jsx)(i.td,{children:"Gets or sets the player volume (0.0 to 1.0)."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"currentTime"})}),(0,d.jsx)(i.td,{children:"Read/Write"}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"number"})}),(0,d.jsx)(i.td,{children:"Gets or sets the current playback time in seconds."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"muted"})}),(0,d.jsx)(i.td,{children:"Read/Write"}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"boolean"})}),(0,d.jsx)(i.td,{children:"Gets or sets whether the video is muted."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"loop"})}),(0,d.jsx)(i.td,{children:"Read/Write"}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"boolean"})}),(0,d.jsx)(i.td,{children:"Gets or sets whether the video should loop."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"rate"})}),(0,d.jsx)(i.td,{children:"Read/Write"}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"number"})}),(0,d.jsx)(i.td,{children:"Gets or sets the playback rate (e.g., 1.0 for normal speed, 0.5 for half speed, 2.0 for double speed)."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"mixAudioMode"})}),(0,d.jsx)(i.td,{children:"Read/Write"}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"MixAudioMode"})}),(0,d.jsxs)(i.td,{children:["Controls how this player's audio mixes with other audio sources (see ",(0,d.jsx)(i.a,{href:"/react-native-video/docs/v7/api-reference/type-aliases/MixAudioMode",children:"MixAudioMode"}),")."]})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"ignoreSilentSwitchMode"})}),(0,d.jsx)(i.td,{children:"Read/Write"}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"IgnoreSilentSwitchMode"})}),(0,d.jsx)(i.td,{children:"iOS-only. Determines how audio should behave when the hardware mute (silent) switch is on."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"playInBackground"})}),(0,d.jsx)(i.td,{children:"Read/Write"}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"boolean"})}),(0,d.jsx)(i.td,{children:"Whether playback should continue when the app goes to the background."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"playWhenInactive"})}),(0,d.jsx)(i.td,{children:"Read/Write"}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"boolean"})}),(0,d.jsx)(i.td,{children:"Whether playback should continue when the app is inactive (e.g., during a phone call)."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"isPlaying"})}),(0,d.jsx)(i.td,{children:"Read-only"}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"boolean"})}),(0,d.jsxs)(i.td,{children:["Returns ",(0,d.jsx)(i.code,{children:"true"})," if the video is currently playing."]})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"selectedTrack"})}),(0,d.jsx)(i.td,{children:"Read-only"}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"TextTrack | undefined"})}),(0,d.jsxs)(i.td,{children:["Currently selected text track, or ",(0,d.jsx)(i.code,{children:"undefined"})," when no track is selected."]})]})]})]}),"\n",(0,d.jsx)(i.h3,{id:"error-handling",children:"Error Handling"}),"\n",(0,d.jsxs)(i.table,{children:[(0,d.jsx)(i.thead,{children:(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.th,{children:"Property"}),(0,d.jsx)(i.th,{children:"Type"}),(0,d.jsx)(i.th,{children:"Description"})]})}),(0,d.jsx)(i.tbody,{children:(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"onError?"})}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"(error: VideoRuntimeError) => void"})}),(0,d.jsx)(i.td,{children:"A callback function that is invoked when a runtime error occurs in the player. You can use this to catch and handle errors gracefully."})]})})]}),"\n",(0,d.jsx)(i.h3,{id:"buffer-config",children:"Buffer Config"}),"\n",(0,d.jsxs)(i.p,{children:["You can fine\u2011tune buffering via ",(0,d.jsx)(i.code,{children:"bufferConfig"})," on the ",(0,d.jsx)(i.code,{children:"VideoConfig"})," you pass to ",(0,d.jsx)(i.code,{children:"useVideoPlayer"}),"/",(0,d.jsx)(i.code,{children:"VideoPlayer"}),". This controls how much data is buffered, live latency targets, and iOS network constraints."]}),"\n",(0,d.jsx)(i.p,{children:"Example"}),"\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{className:"language-ts",children:"const player = new VideoPlayer({\n  source: {\n    uri: 'https://example.com/stream.m3u8',\n    bufferConfig: {\n      // Android\n      minBufferMs: 5000,\n      maxBufferMs: 10000,\n      // iOS\n      preferredForwardBufferDurationMs: 3000,\n      // Live (cross\u2011platform target)\n      livePlayback: { targetOffsetMs: 500 },\n    },\n  },\n});\n"})}),"\n",(0,d.jsx)(i.h4,{id:"android",children:"Android"}),"\n",(0,d.jsx)(i.p,{children:"Properties below are Android\u2011only"}),"\n",(0,d.jsxs)(i.table,{children:[(0,d.jsx)(i.thead,{children:(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.th,{children:"Property"}),(0,d.jsx)(i.th,{children:"Type"}),(0,d.jsx)(i.th,{children:"Description"})]})}),(0,d.jsxs)(i.tbody,{children:[(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"minBufferMs"})}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"number"})}),(0,d.jsx)(i.td,{children:"Minimum media duration the player attempts to keep buffered (ms). Default: 5000."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"maxBufferMs"})}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"number"})}),(0,d.jsx)(i.td,{children:"Maximum media duration the player attempts to buffer (ms). Default: 10000."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"bufferForPlaybackMs"})}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"number"})}),(0,d.jsx)(i.td,{children:"Media that must be buffered before playback can start or resume after user action (ms). Default: 1000."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"bufferForPlaybackAfterRebufferMs"})}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"number"})}),(0,d.jsx)(i.td,{children:"Media that must be buffered to resume after a rebuffer (ms). Default: 2000."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"backBufferDurationMs"})}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"number"})}),(0,d.jsx)(i.td,{children:"Duration kept behind the current position to allow instant rewind without rebuffer (ms)."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"livePlayback.minPlaybackSpeed"})}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"number"})}),(0,d.jsx)(i.td,{children:"Minimum playback speed used to maintain target live offset."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"livePlayback.maxPlaybackSpeed"})}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"number"})}),(0,d.jsx)(i.td,{children:"Maximum playback speed used to catch up to target live offset."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"livePlayback.minOffsetMs"})}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"number"})}),(0,d.jsx)(i.td,{children:"Minimum allowed live offset (ms)."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"livePlayback.maxOffsetMs"})}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"number"})}),(0,d.jsx)(i.td,{children:"Maximum allowed live offset (ms)."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"livePlayback.targetOffsetMs"})}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"number"})}),(0,d.jsx)(i.td,{children:"Target live offset the player tries to maintain (ms)."})]})]})]}),"\n",(0,d.jsx)(i.h4,{id:"ios-visionos-tvos",children:"iOS, visionOS, tvOS"}),"\n",(0,d.jsx)(i.p,{children:"Properties below are Apple platforms\u2011only"}),"\n",(0,d.jsxs)(i.table,{children:[(0,d.jsx)(i.thead,{children:(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.th,{children:"Property"}),(0,d.jsx)(i.th,{children:"Type"}),(0,d.jsx)(i.th,{children:"Description"})]})}),(0,d.jsxs)(i.tbody,{children:[(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"preferredForwardBufferDurationMs"})}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"number"})}),(0,d.jsx)(i.td,{children:"Preferred duration the player attempts to retain ahead of the playhead (ms)."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"preferredPeakBitRate"})}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"number"})}),(0,d.jsx)(i.td,{children:"Desired limit of network bandwidth for loading the current item (bits per second)."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"preferredMaximumResolution"})}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"{ width: number; height: number }"})}),(0,d.jsx)(i.td,{children:"Preferred maximum video resolution."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"preferredPeakBitRateForExpensiveNetworks"})}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"number"})}),(0,d.jsx)(i.td,{children:"Bandwidth limit for expensive networks (e.g., cellular), in bits per second."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"preferredMaximumResolutionForExpensiveNetworks"})}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"{ width: number; height: number }"})}),(0,d.jsx)(i.td,{children:"Preferred maximum resolution on expensive networks."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"livePlayback.targetOffsetMs"})}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"number"})}),(0,d.jsx)(i.td,{children:"Target live offset (ms) the player will try to maintain."})]})]})]}),"\n",(0,d.jsx)(i.h2,{id:"drm",children:"DRM"}),"\n",(0,d.jsxs)(i.p,{children:["Protected content is supported via a plugin. See the full DRM guide: ",(0,d.jsx)(i.a,{href:"/react-native-video/docs/v7/player/drm",children:"DRM"}),"."]}),"\n",(0,d.jsx)(i.p,{children:"Quick notes:"}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:["Install and enable the official plugin ",(0,d.jsx)(i.code,{children:"@react-native-video/drm"})," and call ",(0,d.jsx)(i.code,{children:"enable()"})," at app startup before creating players."]}),"\n",(0,d.jsxs)(i.li,{children:["Pass DRM configuration on the source using the ",(0,d.jsx)(i.code,{children:"drm"})," property of ",(0,d.jsx)(i.code,{children:"VideoConfig"})," (see the DRM guide for platform specifics and ",(0,d.jsx)(i.code,{children:"getLicense"})," examples)."]}),"\n",(0,d.jsxs)(i.li,{children:["If you defer initialization (",(0,d.jsx)(i.code,{children:"initializeOnCreation: false"}),"), be sure to call ",(0,d.jsx)(i.code,{children:"await player.initialize()"})," (or ",(0,d.jsx)(i.code,{children:"preload()"}),") before expecting DRM license acquisition events."]}),"\n"]}),"\n",(0,d.jsx)(i.h2,{id:"player-lifecycle",children:"Player Lifecycle"}),"\n",(0,d.jsxs)(i.p,{children:["Understanding the lifecycle of the ",(0,d.jsx)(i.code,{children:"VideoPlayer"})," is crucial for managing resources effectively and ensuring a smooth user experience."]}),"\n",(0,d.jsx)(i.h3,{id:"creation-and-initialization",children:"Creation and Initialization"}),"\n",(0,d.jsxs)(i.ol,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Instantiation"}),": A ",(0,d.jsx)(i.code,{children:"VideoPlayer"})," instance is created by calling its constructor with a video source (URL, ",(0,d.jsx)(i.code,{children:"VideoSource"}),", or ",(0,d.jsx)(i.code,{children:"VideoConfig"}),").","\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{className:"language-typescript",children:"const player = new VideoPlayer('https://example.com/video.mp4');\n"})}),"\n"]}),"\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Native Player Allocation"}),": A lightweight native player object is allocated immediately."]}),"\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Asset Initialization"}),": By default (unless you opt out) the underlying media item is prepared ",(0,d.jsx)(i.strong,{children:"asynchronously right after creation"}),". You can control this with ",(0,d.jsx)(i.code,{children:"initializeOnCreation"})," inside ",(0,d.jsx)(i.code,{children:"VideoConfig"}),"."]}),"\n"]}),"\n",(0,d.jsx)(i.h4,{id:"deferred-initialization-advanced",children:"Deferred Initialization (Advanced)"}),"\n",(0,d.jsxs)(i.p,{children:["If you pass a ",(0,d.jsx)(i.code,{children:"VideoConfig"})," with ",(0,d.jsx)(i.code,{children:"{ initializeOnCreation: false }"}),", the player will skip preparing the media item automatically. This is useful when:"]}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsx)(i.li,{children:"You need to batch\u2011create many players without incurring immediate decoding / network cost"}),"\n",(0,d.jsx)(i.li,{children:"You want to attach event handlers before any network requests happen"}),"\n",(0,d.jsx)(i.li,{children:"You want explicit control over when buffering begins (e.g. on user interaction)"}),"\n"]}),"\n",(0,d.jsx)(i.p,{children:"To initialize later, call:"}),"\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{className:"language-ts",children:"await player.initialize();\n// or preload if you also want it prepared & ready\nawait player.preload();\n"})}),"\n",(0,d.jsx)(i.h4,{id:"initialization-methods-comparison",children:"Initialization Methods Comparison"}),"\n",(0,d.jsxs)(i.table,{children:[(0,d.jsx)(i.thead,{children:(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.th,{children:"Method"}),(0,d.jsx)(i.th,{children:"When to use"}),(0,d.jsx)(i.th,{children:"What it does"})]})}),(0,d.jsxs)(i.tbody,{children:[(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"initialize()"})}),(0,d.jsx)(i.td,{children:"You deferred initialization and now want to create the native player item / media source"}),(0,d.jsx)(i.td,{children:"Creates & attaches the underlying player item / media source without starting playback"})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"preload()"})}),(0,d.jsxs)(i.td,{children:["You want the player item prepared (buffering kicked off) ahead of an upcoming ",(0,d.jsx)(i.code,{children:"play()"})," call"]}),(0,d.jsx)(i.td,{children:"Ensures the media source is set and prepared; resolves once preparation started (may already be initialized)"})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:"Implicit (default)"}),(0,d.jsxs)(i.td,{children:[(0,d.jsx)(i.code,{children:"initializeOnCreation"})," not set or ",(0,d.jsx)(i.code,{children:"true"})]}),(0,d.jsx)(i.td,{children:"Automatically schedules initialization after JS construction"})]})]})]}),"\n",(0,d.jsx)(i.admonition,{type:"info",children:(0,d.jsxs)(i.p,{children:["By default, the player initializes automatically after construction. If you need to defer initialization, set ",(0,d.jsx)(i.code,{children:"initializeOnCreation: false"})," in the config. You can then call ",(0,d.jsx)(i.code,{children:"player.initialize()"})," or ",(0,d.jsx)(i.code,{children:"player.preload()"})," later to start the player."]})}),"\n",(0,d.jsx)(i.h3,{id:"playing-a-video",children:"Playing a Video"}),"\n",(0,d.jsxs)(i.ol,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Loading"}),": When the player (auto) initializes, ",(0,d.jsx)(i.code,{children:"preload()"})," is called, or after ",(0,d.jsx)(i.code,{children:"replaceSourceAsync()"}),", the player starts loading the video metadata and buffering content.","\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.code,{children:"onLoadStart"}),": Fired when the video starts loading."]}),"\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.code,{children:"onLoad"}),": Fired when the video metadata is loaded and the player is ready to play (duration, dimensions, etc., are available)."]}),"\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.code,{children:"onBuffer"}),": Fired when buffering starts or ends."]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Playback"}),": Once enough data is buffered, playback begins.","\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.code,{children:"onPlaybackStateChange"}),": Fired when the playback state changes (e.g., from ",(0,d.jsx)(i.code,{children:"buffering"})," to ",(0,d.jsx)(i.code,{children:"playing"}),")."]}),"\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.code,{children:"onProgress"}),": Fired periodically with the current playback time."]}),"\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.code,{children:"onReadyToDisplay"}),": Fired when the first frame is ready to be displayed."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(i.h3,{id:"controlling-playback",children:"Controlling Playback"}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.code,{children:"pause()"}),": Pauses playback. ",(0,d.jsx)(i.code,{children:"status"})," changes to ",(0,d.jsx)(i.code,{children:"paused"}),"."]}),"\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.code,{children:"seekTo(time)"}),", ",(0,d.jsx)(i.code,{children:"seekBy(time)"}),": Changes the current playback position. ",(0,d.jsx)(i.code,{children:"onSeek"})," is fired when the seek operation completes."]}),"\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.code,{children:"set volume(value)"}),", ",(0,d.jsx)(i.code,{children:"set muted(value)"}),", ",(0,d.jsx)(i.code,{children:"set loop(value)"}),", ",(0,d.jsx)(i.code,{children:"set rate(value)"}),": Modify player properties. Corresponding events like ",(0,d.jsx)(i.code,{children:"onVolumeChange"})," or ",(0,d.jsx)(i.code,{children:"onPlaybackRateChange"})," might be fired."]}),"\n"]}),"\n",(0,d.jsx)(i.h3,{id:"changing-source",children:"Changing Source"}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.code,{children:"replaceSourceAsync(newSource)"}),": This method allows you to change the video source dynamically.","\n",(0,d.jsxs)(i.ol,{children:["\n",(0,d.jsxs)(i.li,{children:["The current native player resources associated with the old source are released (similar to ",(0,d.jsx)(i.code,{children:"release()"})," but specifically for the source)."]}),"\n",(0,d.jsxs)(i.li,{children:["A new native player instance (or reconfigured existing one) is prepared for the ",(0,d.jsx)(i.code,{children:"newSource"}),"."]}),"\n",(0,d.jsxs)(i.li,{children:["The loading lifecycle events (",(0,d.jsx)(i.code,{children:"onLoadStart"}),", ",(0,d.jsx)(i.code,{children:"onLoad"}),", etc.) will fire for the new source."]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.code,{children:"replaceSourceAsync(null)"}),": This effectively unloads the current video and releases its associated resources without loading a new one. This is useful for freeing up memory if the player is temporarily not needed but might be used again later."]}),"\n"]}),"\n",(0,d.jsx)(i.h3,{id:"releasing-resources",children:"Releasing Resources"}),"\n",(0,d.jsx)(i.p,{children:"There are two main ways to release resources:"}),"\n",(0,d.jsxs)(i.ol,{children:["\n",(0,d.jsxs)(i.li,{children:["\n",(0,d.jsxs)(i.p,{children:[(0,d.jsx)(i.strong,{children:(0,d.jsx)(i.code,{children:"replaceSourceAsync(null)"})}),": This is a less destructive way to free resources related ",(0,d.jsx)(i.em,{children:"only"})," to the current video source."]}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:["The ",(0,d.jsx)(i.code,{children:"VideoPlayer"})," instance itself remains usable."]}),"\n",(0,d.jsxs)(i.li,{children:["You can later call ",(0,d.jsx)(i.code,{children:"replaceSourceAsync(newSource)"})," to load and play a new video."]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(i.li,{children:["\n",(0,d.jsxs)(i.p,{children:[(0,d.jsx)(i.strong,{children:(0,d.jsx)(i.code,{children:"release()"})}),": This is a destructive operation."]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(i.admonition,{type:"danger",children:(0,d.jsxs)(i.p,{children:["After calling ",(0,d.jsx)(i.code,{children:"release()"}),", the player instance becomes unusable. Any subsequent calls to its methods or property access will result in errors."]})}),"\n",(0,d.jsx)(i.admonition,{type:"tip",children:(0,d.jsxs)(i.p,{children:["It is recommended to use ",(0,d.jsx)(i.code,{children:"replaceSourceAsync(null)"})," when you want to free resources related to the current video source. You should call ",(0,d.jsx)(i.code,{children:"release()"})," only when you are 100% sure that you don't need the player instance anymore. Anyway garbage collector will release the player instance when it is no longer needed."]})}),"\n",(0,d.jsx)(i.h3,{id:"error-handling-1",children:"Error Handling"}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:["The ",(0,d.jsx)(i.code,{children:"onError"})," callback, if provided, will be called when a ",(0,d.jsx)(i.code,{children:"VideoRuntimeError"})," occurs. This allows you to handle issues like network errors, invalid source, or platform-specific playback problems."]}),"\n",(0,d.jsxs)(i.li,{children:["If ",(0,d.jsx)(i.code,{children:"onError"})," is not provided, errors might be thrown as exceptions."]}),"\n"]}),"\n",(0,d.jsxs)(i.h3,{id:"using-with-hooks-usevideoplayer",children:["Using with Hooks (",(0,d.jsx)(i.code,{children:"useVideoPlayer"}),")"]}),"\n",(0,d.jsxs)(i.p,{children:["The ",(0,d.jsx)(i.code,{children:"useVideoPlayer"})," hook simplifies managing the ",(0,d.jsx)(i.code,{children:"VideoPlayer"})," lifecycle within React components."]}),"\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{className:"language-typescript",children:"import { useVideoPlayer } from 'react-native-video';\n\nconst MyComponent = () => {\n  const player = useVideoPlayer('https://example.com/video.mp4', (playerInstance) => {\n    // Optional setup function: configure the player instance after creation\n    playerInstance.loop = true;\n  });\n\n  // ... use player ...\n\n  return <VideoView player={player} />;\n};\n"})}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Automatic Creation"}),": ",(0,d.jsx)(i.code,{children:"useVideoPlayer"})," creates a ",(0,d.jsx)(i.code,{children:"VideoPlayer"})," instance when the component mounts or when the source dependency changes."]}),"\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Automatic Cleanup"}),": It automatically cleanup resources when the component unmounts or before recreating the player due to a source change. This prevents resource leaks."]}),"\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Dependency Management"}),": If the ",(0,d.jsx)(i.code,{children:"source"})," prop passed to ",(0,d.jsx)(i.code,{children:"useVideoPlayer"})," changes, the hook will clean up the old player instance and create a new one with the new source."]}),"\n"]}),"\n",(0,d.jsxs)(i.admonition,{type:"tip",children:[(0,d.jsxs)(i.p,{children:["Using ",(0,d.jsx)(i.code,{children:"useVideoPlayer"})," is the recommended way to manage ",(0,d.jsx)(i.code,{children:"VideoPlayer"})," instances in functional components to ensure proper lifecycle management and resource cleanup. It will also respect ",(0,d.jsx)(i.code,{children:"initializeOnCreation"})," (defaults to ",(0,d.jsx)(i.code,{children:"true"}),"). If you need deferred initialization with the hook:"]}),(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{className:"language-tsx",children:"const player = useVideoPlayer({\n    source: { uri: 'https://example.com/video.mp4' },\n    initializeOnCreation: false,\n}, (instance) => {\n    // Attach listeners first\n    instance.onLoad = () => console.log('Loaded');\n});\n\n// Later (e.g. on user tap)\nawait player.initialize(); // or player.preload()\nplayer.play();\n"})})]})]})}function h(e={}){let{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,d.jsx)(i,{...e,children:(0,d.jsx)(a,{...e})}):a(e)}},6151:function(e,i,n){n.d(i,{R:()=>l,x:()=>t});var r=n(6540);let d={},s=r.createContext(d);function l(e){let i=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function t(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:l(e.components),r.createElement(s.Provider,{value:i},e.children)}}}]);