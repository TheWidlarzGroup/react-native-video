"use strict";(self.webpackChunk_react_native_video_docs=self.webpackChunk_react_native_video_docs||[]).push([["6810"],{6453:function(e,n,r){r.r(n),r.d(n,{frontMatter:()=>a,toc:()=>c,default:()=>h,metadata:()=>t,assets:()=>o,contentTitle:()=>s});var t=JSON.parse('{"id":"events/events","title":"Handling Player Events","description":"The VideoPlayer emits a variety of events that allow you to monitor and react to changes in its state and playback.","source":"@site/docs/events/events.md","sourceDirName":"events","slug":"/events/","permalink":"/react-native-video/docs/v7/events/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_label":"Events","sidebar_position":5},"sidebar":"docsSidebar","previous":{"title":"DRM","permalink":"/react-native-video/docs/v7/player/drm"},"next":{"title":"Manual Configuration","permalink":"/react-native-video/docs/v7/configuration/manual"}}'),i=r(4848),d=r(6151);let a={sidebar_label:"Events",sidebar_position:5},s="Handling Player Events",o={},c=[{value:"Using the <code>useEvent</code> Hook",id:"using-the-useevent-hook",level:2},{value:"Available Events",id:"available-events",level:2},{value:"Initialization Timing and Events",id:"initialization-timing-and-events",level:3},{value:"Subscribing to Events",id:"subscribing-to-events",level:2},{value:"Clearing Events",id:"clearing-events",level:2}];function l(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"handling-player-events",children:"Handling Player Events"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"VideoPlayer"})," emits a variety of events that allow you to monitor and react to changes in its state and playback."]}),"\n",(0,i.jsxs)(n.h2,{id:"using-the-useevent-hook",children:["Using the ",(0,i.jsx)(n.code,{children:"useEvent"})," Hook"]}),"\n",(0,i.jsxs)(n.p,{children:["For React functional components, the ",(0,i.jsx)(n.code,{children:"useEvent"})," hook provides a convenient way to subscribe to player events and automatically manage cleanup."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import { useVideoPlayer, useEvent } from 'react-native-video';\nimport { useEffect } from 'react';\n\nconst MyVideoComponent = () => {\n  const player = useVideoPlayer('https://example.com/video.mp4', (_player) => {\n    _player.play();\n  });\n\n  useEvent(player, 'onLoad', (data) => {\n    console.log('Video loaded via useEvent! Duration:', data.duration);\n  });\n\n  useEvent(player, 'onProgress', (data) => {\n    console.log('Progress via useEvent:', data.currentTime);\n  });\n\n  // For onError, which is a direct property on VideoPlayer, not from VideoPlayerEvents\n  useEvent(player, 'onError', (error) => {\n    console.error('Player Error via useEvent:', error.code, error.message);\n  });\n\n  return <VideoView player={player} />;\n};\n"})}),"\n",(0,i.jsx)(n.h2,{id:"available-events",children:"Available Events"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"VideoPlayer"})," class, through ",(0,i.jsx)(n.code,{children:"VideoPlayerEvents"}),", supports the following events. You can subscribe to these by assigning a callback function to the corresponding property on the ",(0,i.jsx)(n.code,{children:"VideoPlayer"})," instance."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Event"}),(0,i.jsx)(n.th,{children:"Callback Signature"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"onAudioBecomingNoisy"})}),(0,i.jsx)(n.td,{children:"() => void"}),(0,i.jsx)(n.td,{children:"Fired when audio is about to become noisy (e.g., headphones unplugged)."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"onAudioFocusChange"})}),(0,i.jsx)(n.td,{children:"(hasAudioFocus: boolean) => void"}),(0,i.jsx)(n.td,{children:"Fired when the audio focus changes (e.g., another app starts playing audio)."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"onBandwidthUpdate"})}),(0,i.jsxs)(n.td,{children:["(data: ",(0,i.jsx)(n.a,{href:"/react-native-video/docs/v7/api-reference/interfaces/BandwidthData",children:"BandwidthData"}),") => void"]}),(0,i.jsx)(n.td,{children:"Fired with an estimate of the available bandwidth."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"onBuffer"})}),(0,i.jsx)(n.td,{children:"(buffering: boolean) => void"}),(0,i.jsx)(n.td,{children:"Fired when the player starts or stops buffering data."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"onControlsVisibleChange"})}),(0,i.jsx)(n.td,{children:"(visible: boolean) => void"}),(0,i.jsx)(n.td,{children:"Fired when the visibility of native controls changes."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"onEnd"})}),(0,i.jsx)(n.td,{children:"() => void"}),(0,i.jsx)(n.td,{children:"Fired when the video playback reaches the end."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"onExternalPlaybackChange"})}),(0,i.jsx)(n.td,{children:"(externalPlaybackActive: boolean) => void"}),(0,i.jsx)(n.td,{children:"Fired when the external playback status changes (e.g., AirPlay)."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"onLoad"})}),(0,i.jsxs)(n.td,{children:["(data: ",(0,i.jsx)(n.a,{href:"/react-native-video/docs/v7/api-reference/interfaces/onLoadData",children:"onLoadData"}),") => void"]}),(0,i.jsx)(n.td,{children:"Fired when the video has loaded and is ready to play."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"onLoadStart"})}),(0,i.jsxs)(n.td,{children:["(data: ",(0,i.jsx)(n.a,{href:"/react-native-video/docs/v7/api-reference/interfaces/onLoadStartData",children:"onLoadStartData"}),") => void"]}),(0,i.jsx)(n.td,{children:"Fired when the video starts loading."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"onPlaybackRateChange"})}),(0,i.jsx)(n.td,{children:"(rate: number) => void"}),(0,i.jsx)(n.td,{children:"Fired when the playback rate changes."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"onPlaybackStateChange"})}),(0,i.jsxs)(n.td,{children:["(data: ",(0,i.jsx)(n.a,{href:"/react-native-video/docs/v7/api-reference/interfaces/onPlaybackStateChangeData",children:"onPlaybackStateChangeData"}),") => void"]}),(0,i.jsx)(n.td,{children:"Fired when the playback state changes (e.g., playing, paused, stopped)."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"onProgress"})}),(0,i.jsxs)(n.td,{children:["(data: ",(0,i.jsx)(n.a,{href:"/react-native-video/docs/v7/api-reference/interfaces/onProgressData",children:"onProgressData"}),") => void"]}),(0,i.jsx)(n.td,{children:"Fired periodically during playback with the current time."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"onReadyToDisplay"})}),(0,i.jsx)(n.td,{children:"() => void"}),(0,i.jsx)(n.td,{children:"Fired when the player is ready to display the first frame of the video."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"onSeek"})}),(0,i.jsx)(n.td,{children:"(seekTime: number) => void"}),(0,i.jsx)(n.td,{children:"Fired when a seek operation has completed."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"onStatusChange"})}),(0,i.jsxs)(n.td,{children:["(status: ",(0,i.jsx)(n.a,{href:"/react-native-video/docs/v7/api-reference/type-aliases/VideoPlayerStatus",children:"VideoPlayerStatus"}),") => void"]}),(0,i.jsx)(n.td,{children:"Fired when the player status changes (detailed status updates)."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"onTextTrackDataChanged"})}),(0,i.jsx)(n.td,{children:"(texts: string[]) => void"}),(0,i.jsx)(n.td,{children:"Fired when text track data (e.g., subtitles) changes."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"onTimedMetadata"})}),(0,i.jsxs)(n.td,{children:["(metadata: ",(0,i.jsx)(n.a,{href:"/react-native-video/docs/v7/api-reference/interfaces/TimedMetadata",children:"TimedMetadata"}),") => void"]}),(0,i.jsx)(n.td,{children:"Fired when timed metadata is encountered in the video stream."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"onTrackChange"})}),(0,i.jsxs)(n.td,{children:["(track: ",(0,i.jsx)(n.a,{href:"/react-native-video/docs/v7/api-reference/interfaces/TextTrack",children:"TextTrack"})," | null) => void"]}),(0,i.jsx)(n.td,{children:"Fired when the selected text track changes."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"onVolumeChange"})}),(0,i.jsxs)(n.td,{children:["(data: ",(0,i.jsx)(n.a,{href:"/react-native-video/docs/v7/api-reference/interfaces/onVolumeChangeData",children:"onVolumeChangeData"}),") => void"]}),(0,i.jsx)(n.td,{children:"Fired when the volume changes."})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["Additionally, the ",(0,i.jsx)(n.code,{children:"VideoPlayer"})," instance itself has an ",(0,i.jsx)(n.code,{children:"onError"})," property:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"onError: (error: "})," ",(0,i.jsx)(n.a,{href:"/react-native-video/docs/v7/api-reference/interfaces/VideoRuntimeError",children:"VideoRuntimeError"})," ",(0,i.jsx)(n.code,{children:") => void"})," \u2014 Fired when an error occurs. The callback receives the ",(0,i.jsx)(n.code,{children:"VideoRuntimeError"})," object."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsxs)(n.strong,{children:["Benefits of ",(0,i.jsx)(n.code,{children:"useEvent"})]}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Automatic Cleanup"}),": The event listener is automatically removed when the component unmounts or when the ",(0,i.jsx)(n.code,{children:"player"}),", ",(0,i.jsx)(n.code,{children:"event"}),", or ",(0,i.jsx)(n.code,{children:"callback"})," dependencies change, preventing memory leaks."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Type Safety"}),": Provides better type inference for event callback parameters."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"This hook is recommended for managing event subscriptions in a declarative React style."}),"\n",(0,i.jsx)(n.h3,{id:"initialization-timing-and-events",children:"Initialization Timing and Events"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"onLoadStart"})," / ",(0,i.jsx)(n.code,{children:"onLoad"})," will fire automatically after construction when ",(0,i.jsx)(n.code,{children:"initializeOnCreation"})," (default ",(0,i.jsx)(n.code,{children:"true"}),") is enabled. If you set ",(0,i.jsx)(n.code,{children:"initializeOnCreation: false"}),", these events will not fire until you call ",(0,i.jsx)(n.code,{children:"initialize()"})," or ",(0,i.jsx)(n.code,{children:"preload()"}),". Attach your event handlers before invoking those methods to avoid missing early events."]}),"\n",(0,i.jsx)(n.h2,{id:"subscribing-to-events",children:"Subscribing to Events"}),"\n",(0,i.jsx)(n.p,{children:"You can subscribe to an event by assigning a function to the player instance's corresponding property:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import { VideoPlayer } from 'react-native-video';\n\nconst player = new VideoPlayer('https://example.com/video.mp4');\n\nplayer.addEventListener('onLoad', (data) => {\n  console.log('Video loaded! Duration:', data.duration);\n});\n\nplayer.addEventListener('onProgress', (data) => {\n  console.log('Current time:', data.currentTime);\n});\n\nplayer.addEventListener('onError', (error) => {\n  console.error('Player Error:', error.code, error.message);\n});\n\nplayer.play();\n"})}),"\n",(0,i.jsx)(n.h2,{id:"clearing-events",children:"Clearing Events"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"player.clearEvent(eventName)"})," method can be used to clear a specific native event handler."]}),"\n",(0,i.jsxs)(n.li,{children:["When a player instance is no longer needed and ",(0,i.jsx)(n.code,{children:"player.release()"})," is called, all event listeners are automatically cleared"]}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},6151:function(e,n,r){r.d(n,{R:()=>a,x:()=>s});var t=r(6540);let i={},d=t.createContext(i);function a(e){let n=t.useContext(d);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(d.Provider,{value:n},e.children)}}}]);