"use strict";(self.webpackChunk_react_native_video_docs=self.webpackChunk_react_native_video_docs||[]).push([["4277"],{7005:function(e,n,r){r.r(n),r.d(n,{frontMatter:()=>i,default:()=>h,toc:()=>l,metadata:()=>t,assets:()=>o,contentTitle:()=>a});var t=JSON.parse('{"id":"events/events","title":"Handling Player Events","description":"The VideoPlayer emits a variety of events that allow you to monitor and react to changes in its state and playback.","source":"@site/docs/events/events.md","sourceDirName":"events","slug":"/events/","permalink":"/react-native-video/docs/v7/events/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_label":"Events","sidebar_position":5},"sidebar":"docsSidebar","previous":{"title":"VideoView","permalink":"/react-native-video/docs/v7/video-view"},"next":{"title":"Configuration","permalink":"/react-native-video/docs/v7/category/configuration"}}'),s=r(5893),d=r(980);let i={sidebar_label:"Events",sidebar_position:5},a="Handling Player Events",o={},l=[{value:"Using the <code>useEvent</code> Hook",id:"using-the-useevent-hook",level:2},{value:"Available Events",id:"available-events",level:2},{value:"Subscribing to Events",id:"subscribing-to-events",level:2},{value:"Clearing Events",id:"clearing-events",level:2}];function c(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"handling-player-events",children:"Handling Player Events"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"VideoPlayer"})," emits a variety of events that allow you to monitor and react to changes in its state and playback."]}),"\n",(0,s.jsxs)(n.h2,{id:"using-the-useevent-hook",children:["Using the ",(0,s.jsx)(n.code,{children:"useEvent"})," Hook"]}),"\n",(0,s.jsxs)(n.p,{children:["For React functional components, the ",(0,s.jsx)(n.code,{children:"useEvent"})," hook provides a convenient way to subscribe to player events and automatically manage cleanup."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { useVideoPlayer, useEvent } from 'react-native-video';\nimport { useEffect } from 'react';\n\nconst MyVideoComponent = () => {\n  const player = useVideoPlayer('https://example.com/video.mp4', (_player) => {\n    _player.play();\n  });\n\n  useEvent(player, 'onLoad', (data) => {\n    console.log('Video loaded via useEvent! Duration:', data.duration);\n  });\n\n  useEvent(player, 'onProgress', (data) => {\n    console.log('Progress via useEvent:', data.currentTime);\n  });\n\n  // For onError, which is a direct property on VideoPlayer, not from VideoPlayerEvents\n  useEvent(player, 'onError', (error) => {\n    console.error('Player Error via useEvent:', error.code, error.message);\n  });\n\n  return <VideoView player={player} />;\n};\n"})}),"\n",(0,s.jsx)(n.h2,{id:"available-events",children:"Available Events"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"VideoPlayer"})," class, through ",(0,s.jsx)(n.code,{children:"VideoPlayerEvents"}),", supports the following events. You can subscribe to these by assigning a callback function to the corresponding property on the ",(0,s.jsx)(n.code,{children:"VideoPlayer"})," instance."]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Callback Data Example"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"onAudioBecomingNoisy"})}),(0,s.jsx)(n.td,{children:"Fired when audio is about to become noisy (e.g., headphones unplugged)."}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"onAudioFocusChange"})}),(0,s.jsx)(n.td,{children:"Fired when the audio focus changes (e.g., another app starts playing audio)."}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"onBandwidthUpdate"})}),(0,s.jsx)(n.td,{children:"Fired with an estimate of the available bandwidth."}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"onBuffer"})}),(0,s.jsx)(n.td,{children:"Fired when the player starts or stops buffering data."}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{ isBuffering: boolean }"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"onControlsVisibleChange"})}),(0,s.jsx)(n.td,{children:"Fired when the visibility of native controls changes."}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"onEnd"})}),(0,s.jsx)(n.td,{children:"Fired when the video playback reaches the end."}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"onExternalPlaybackChange"})}),(0,s.jsx)(n.td,{children:"Fired when the external playback status changes (e.g., AirPlay)."}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"onLoad"})}),(0,s.jsx)(n.td,{children:"Fired when the video has loaded and is ready to play."}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/react-native-video/docs/v7/api-reference/interfaces/onLoadData",children:"Video metadata (duration, naturalSize, etc.)"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"onLoadStart"})}),(0,s.jsx)(n.td,{children:"Fired when the video starts loading."}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"onPlaybackRateChange"})}),(0,s.jsx)(n.td,{children:"Fired when the playback rate changes."}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{ rate: number }"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"onPlaybackStateChange"})}),(0,s.jsx)(n.td,{children:"Fired when the playback state changes (e.g., playing, paused, stopped)."}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{ status: VideoPlayerStatus }"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"onProgress"})}),(0,s.jsx)(n.td,{children:"Fired periodically during playback with the current time."}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{ currentTime: number, playableDuration: number, seekableDuration: number }"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"onReadyToDisplay"})}),(0,s.jsx)(n.td,{children:"Fired when the player is ready to display the first frame of the video."}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"onSeek"})}),(0,s.jsx)(n.td,{children:"Fired when a seek operation has completed."}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{ seekTime: number }"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"onStatusChange"})}),(0,s.jsx)(n.td,{children:"Fired when the player status changes (detailed status updates)."}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"onTextTrackDataChanged"})}),(0,s.jsx)(n.td,{children:"Fired when text track data (e.g., subtitles) changes."}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"onTimedMetadata"})}),(0,s.jsx)(n.td,{children:"Fired when timed metadata is encountered in the video stream."}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"onVolumeChange"})}),(0,s.jsx)(n.td,{children:"Fired when the volume changes."}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{ volume: number }"})})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["Additionally, the ",(0,s.jsx)(n.code,{children:"VideoPlayer"})," instance itself has an ",(0,s.jsx)(n.code,{children:"onError"})," property:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"onError"}),": Fired when a error occurs. The callback receives the ",(0,s.jsx)(n.code,{children:"VideoRuntimeError"})," object."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsxs)(n.strong,{children:["Benefits of ",(0,s.jsx)(n.code,{children:"useEvent"})]}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Automatic Cleanup"}),": The event listener is automatically removed when the component unmounts or when the ",(0,s.jsx)(n.code,{children:"player"}),", ",(0,s.jsx)(n.code,{children:"event"}),", or ",(0,s.jsx)(n.code,{children:"callback"})," dependencies change, preventing memory leaks."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Type Safety"}),": Provides better type inference for event callback parameters."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This hook is recommended for managing event subscriptions in a declarative React style."}),"\n",(0,s.jsx)(n.h2,{id:"subscribing-to-events",children:"Subscribing to Events"}),"\n",(0,s.jsx)(n.p,{children:"You can subscribe to an event by assigning a function to the player instance's corresponding property:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { VideoPlayer } from 'react-native-video';\n\nconst player = new VideoPlayer('https://example.com/video.mp4');\n\nplayer.onLoad = (data) => {\n  console.log('Video loaded! Duration:', data.duration);\n};\n\nplayer.onProgress = (data) => {\n  console.log('Current time:', data.currentTime);\n};\n\nplayer.onError = (error) => {\n  console.error('Player Error:', error.code, error.message);\n};\n\nplayer.play();\n"})}),"\n",(0,s.jsx)(n.h2,{id:"clearing-events",children:"Clearing Events"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"player.clearEvent(eventName)"})," method can be used to clear a specific native event handler."]}),"\n",(0,s.jsxs)(n.li,{children:["When a player instance is no longer needed and ",(0,s.jsx)(n.code,{children:"player.release()"})," is called, all event listeners are automatically cleared"]}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,d.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},980:function(e,n,r){r.d(n,{Z:()=>a,a:()=>i});var t=r(7294);let s={},d=t.createContext(s);function i(e){let n=t.useContext(d);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),t.createElement(d.Provider,{value:n},e.children)}}}]);