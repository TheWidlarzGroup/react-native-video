"use strict";(self.webpackChunk_react_native_video_docs=self.webpackChunk_react_native_video_docs||[]).push([["6680"],{1609:function(e,n,i){i.r(n),i.d(n,{frontMatter:()=>d,toc:()=>t,default:()=>h,metadata:()=>r,assets:()=>a,contentTitle:()=>c});var r=JSON.parse('{"id":"plugins/interface","title":"Plugin Interface","description":"Reference for the React Native Video plugin interface","source":"@site/docs/plugins/interface.md","sourceDirName":"plugins","slug":"/plugins/interface","permalink":"/react-native-video/docs/v7/plugins/interface","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Plugin Interface","description":"Reference for the React Native Video plugin interface","sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"Plugin Registry","permalink":"/react-native-video/docs/v7/plugins/registry"},"next":{"title":"Plugin Usage Examples","permalink":"/react-native-video/docs/v7/plugins/examples"}}'),l=i(4848),s=i(6151);let d={title:"Plugin Interface",description:"Reference for the React Native Video plugin interface",sidebar_position:2},c="Plugin Interface Reference",a={},t=[{value:"ReactNativeVideoPluginSpec Interface",id:"reactnativevideopluginspec-interface",level:2},{value:"Required Properties",id:"required-properties",level:3},{value:"id: String",id:"id-string",level:4},{value:"name: String",id:"name-string",level:4},{value:"Lifecycle Methods",id:"lifecycle-methods",level:2},{value:"Player Lifecycle",id:"player-lifecycle",level:3},{value:"onPlayerCreated",id:"onplayercreated",level:4},{value:"onPlayerDestroyed",id:"onplayerdestroyed",level:4},{value:"Video View Lifecycle",id:"video-view-lifecycle",level:3},{value:"onVideoViewCreated",id:"onvideoviewcreated",level:4},{value:"onVideoViewDestroyed",id:"onvideoviewdestroyed",level:4},{value:"Content Modification Methods",id:"content-modification-methods",level:2},{value:"overrideSource",id:"overridesource",level:3},{value:"getDRMManager",id:"getdrmmanager",level:3},{value:"Android-Specific Methods",id:"android-specific-methods",level:2},{value:"getMediaDataSourceFactory",id:"getmediadatasourcefactory",level:3},{value:"getMediaSourceFactory",id:"getmediasourcefactory",level:3},{value:"getMediaItemBuilder",id:"getmediaitembuilder",level:3},{value:"shouldDisableCache",id:"shoulddisablecache",level:3},{value:"Base Implementation: ReactNativeVideoPlugin",id:"base-implementation-reactnativevideoplugin",level:2},{value:"Automatic Registration",id:"automatic-registration",level:3},{value:"Automatic Cleanup (iOS only)",id:"automatic-cleanup-ios-only",level:3},{value:"Default Implementations",id:"default-implementations",level:3},{value:"Method Calling Order",id:"method-calling-order",level:2},{value:"Source Processing Flow",id:"source-processing-flow",level:3},{value:"Lifecycle Flow",id:"lifecycle-flow",level:3},{value:"Error Handling",id:"error-handling",level:2},{value:"DRM Plugin Not Found",id:"drm-plugin-not-found",level:3},{value:"Best Practices",id:"best-practices",level:3},{value:"Platform Differences Summary",id:"platform-differences-summary",level:2}];function o(e){let n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"plugin-interface-reference",children:"Plugin Interface Reference"})}),"\n",(0,l.jsxs)(n.p,{children:["This document provides a complete reference for the ",(0,l.jsx)(n.code,{children:"ReactNativeVideoPluginSpec"})," interface and the base ",(0,l.jsx)(n.code,{children:"ReactNativeVideoPlugin"})," implementation."]}),"\n",(0,l.jsx)(n.h2,{id:"reactnativevideopluginspec-interface",children:"ReactNativeVideoPluginSpec Interface"}),"\n",(0,l.jsx)(n.h3,{id:"required-properties",children:"Required Properties"}),"\n",(0,l.jsx)(n.h4,{id:"id-string",children:"id: String"}),"\n",(0,l.jsx)(n.p,{children:"Unique identifier for the plugin. Must be unique across all registered plugins."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:'// Android\noverride val id: String = "my_unique_plugin_id"\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-swift",children:'// iOS\nvar id: String { "my_unique_plugin_id" }\n'})}),"\n",(0,l.jsx)(n.h4,{id:"name-string",children:"name: String"}),"\n",(0,l.jsx)(n.p,{children:"Human-readable name for the plugin, used in debug logging."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:'// Android\noverride val name: String = "My Custom Plugin"\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-swift",children:'// iOS\nvar name: String { "My Custom Plugin" }\n'})}),"\n",(0,l.jsx)(n.h2,{id:"lifecycle-methods",children:"Lifecycle Methods"}),"\n",(0,l.jsx)(n.h3,{id:"player-lifecycle",children:"Player Lifecycle"}),"\n",(0,l.jsx)(n.h4,{id:"onplayercreated",children:"onPlayerCreated"}),"\n",(0,l.jsx)(n.p,{children:"Called when a new player instance is created."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:"// Android\n@UnstableApi\nfun onPlayerCreated(player: WeakReference<NativeVideoPlayer>)\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-swift",children:"// iOS\nfunc onPlayerCreated(player: Weak<NativeVideoPlayer>)\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"player"}),": Weak reference to the newly created player instance"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Use Cases:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Initialize player-specific resources"}),"\n",(0,l.jsx)(n.li,{children:"Set up player event listeners"}),"\n",(0,l.jsx)(n.li,{children:"Configure player settings"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"onplayerdestroyed",children:"onPlayerDestroyed"}),"\n",(0,l.jsx)(n.p,{children:"Called when a player instance is being destroyed."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:"// Android\n@UnstableApi\nfun onPlayerDestroyed(player: WeakReference<NativeVideoPlayer>)\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-swift",children:"// iOS\nfunc onPlayerDestroyed(player: Weak<NativeVideoPlayer>)\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"player"}),": Weak reference to the player instance being destroyed"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Use Cases:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Clean up player-specific resources"}),"\n",(0,l.jsx)(n.li,{children:"Remove event listeners"}),"\n",(0,l.jsx)(n.li,{children:"Save state or analytics data"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"video-view-lifecycle",children:"Video View Lifecycle"}),"\n",(0,l.jsx)(n.h4,{id:"onvideoviewcreated",children:"onVideoViewCreated"}),"\n",(0,l.jsx)(n.p,{children:"Called when a new video view is created."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:"// Android\n@UnstableApi\nfun onVideoViewCreated(view: WeakReference<VideoView>)\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-swift",children:"// iOS\nfunc onVideoViewCreated(view: Weak<VideoComponentView>)\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"view"}),": Weak reference to the newly created video view"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Use Cases:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Configure view-specific settings"}),"\n",(0,l.jsx)(n.li,{children:"Set up UI event handlers"}),"\n",(0,l.jsx)(n.li,{children:"Initialize view overlays"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"onvideoviewdestroyed",children:"onVideoViewDestroyed"}),"\n",(0,l.jsx)(n.p,{children:"Called when a video view is being destroyed."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:"// Android\n@UnstableApi\nfun onVideoViewDestroyed(view: WeakReference<VideoView>)\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-swift",children:"// iOS\nfunc onVideoViewDestroyed(view: Weak<VideoComponentView>)\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"view"}),": Weak reference to the video view being destroyed"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Use Cases:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Clean up view-specific resources"}),"\n",(0,l.jsx)(n.li,{children:"Remove UI event handlers"}),"\n",(0,l.jsx)(n.li,{children:"Save view state"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"content-modification-methods",children:"Content Modification Methods"}),"\n",(0,l.jsx)(n.h3,{id:"overridesource",children:"overrideSource"}),"\n",(0,l.jsx)(n.p,{children:"Modify the video source before it's processed by the player."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:"// Android\nfun overrideSource(source: NativeVideoPlayerSource): NativeVideoPlayerSource\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-swift",children:"// iOS\nfunc overrideSource(source: NativeVideoPlayerSource) async -> NativeVideoPlayerSource\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"source"}),": The original video source"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Modified video source (can be the same instance if no changes needed)"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Use Cases:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Add authentication headers"}),"\n",(0,l.jsx)(n.li,{children:"Modify URLs (e.g., CDN switching)"}),"\n",(0,l.jsx)(n.li,{children:"Add tracking parameters"}),"\n",(0,l.jsx)(n.li,{children:"Transform source format"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"getdrmmanager",children:"getDRMManager"}),"\n",(0,l.jsx)(n.p,{children:"Provide a custom DRM manager for protected content."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:"// Android\nfun getDRMManager(source: NativeVideoPlayerSource): Any?\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-swift",children:"// iOS\nfunc getDRMManager(source: NativeVideoPlayerSource) async -> Any?\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"source"}),": The video source that may require DRM"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["DRM manager instance, or ",(0,l.jsx)(n.code,{children:"null"})," if this plugin doesn't handle DRM for this source"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Use Cases:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Widevine DRM implementation"}),"\n",(0,l.jsx)(n.li,{children:"FairPlay DRM implementation"}),"\n",(0,l.jsx)(n.li,{children:"Custom DRM solutions"}),"\n",(0,l.jsx)(n.li,{children:"License acquisition logic"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"android-specific-methods",children:"Android-Specific Methods"}),"\n",(0,l.jsx)(n.h3,{id:"getmediadatasourcefactory",children:"getMediaDataSourceFactory"}),"\n",(0,l.jsx)(n.p,{children:"Override the data source factory used by ExoPlayer."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:"fun getMediaDataSourceFactory(\n    source: NativeVideoPlayerSource,\n    mediaDataSourceFactory: DataSource.Factory\n): DataSource.Factory?\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"source"}),": The video source"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"mediaDataSourceFactory"}),": The default data source factory"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Custom data source factory, or ",(0,l.jsx)(n.code,{children:"null"})," to use the default"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Use Cases:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Custom caching strategies"}),"\n",(0,l.jsx)(n.li,{children:"Network optimization"}),"\n",(0,l.jsx)(n.li,{children:"Custom authentication"}),"\n",(0,l.jsx)(n.li,{children:"Analytics data collection"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"getmediasourcefactory",children:"getMediaSourceFactory"}),"\n",(0,l.jsx)(n.p,{children:"Override the media source factory used by ExoPlayer."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:"fun getMediaSourceFactory(\n    source: NativeVideoPlayerSource,\n    mediaSourceFactory: MediaSource.Factory,\n    mediaDataSourceFactory: DataSource.Factory\n): MediaSource.Factory?\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"source"}),": The video source"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"mediaSourceFactory"}),": The default media source factory"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"mediaDataSourceFactory"}),": The data source factory"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Custom media source factory, or ",(0,l.jsx)(n.code,{children:"null"})," to use the default"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Use Cases:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Custom media format support"}),"\n",(0,l.jsx)(n.li,{children:"Advanced ExoPlayer configuration"}),"\n",(0,l.jsx)(n.li,{children:"Source-specific optimizations"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"getmediaitembuilder",children:"getMediaItemBuilder"}),"\n",(0,l.jsx)(n.p,{children:"Override the media item builder used by ExoPlayer."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:"fun getMediaItemBuilder(\n    source: NativeVideoPlayerSource,\n    mediaItemBuilder: MediaItem.Builder\n): MediaItem.Builder?\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"source"}),": The video source"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"mediaItemBuilder"}),": The default media item builder"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Modified media item builder, or ",(0,l.jsx)(n.code,{children:"null"})," to use the default"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Use Cases:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Add custom metadata"}),"\n",(0,l.jsx)(n.li,{children:"Configure subtitles"}),"\n",(0,l.jsx)(n.li,{children:"Set playback preferences"}),"\n",(0,l.jsx)(n.li,{children:"Configure DRM settings"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"shoulddisablecache",children:"shouldDisableCache"}),"\n",(0,l.jsx)(n.p,{children:"Control whether caching should be disabled for a source."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:"fun shouldDisableCache(source: NativeVideoPlayerSource): Boolean\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"source"}),": The video source"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"true"})," to disable caching, ",(0,l.jsx)(n.code,{children:"false"})," to allow caching"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Use Cases:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Disable caching for live streams"}),"\n",(0,l.jsx)(n.li,{children:"Disable caching for DRM content"}),"\n",(0,l.jsx)(n.li,{children:"Custom caching policies"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"base-implementation-reactnativevideoplugin",children:"Base Implementation: ReactNativeVideoPlugin"}),"\n",(0,l.jsx)(n.p,{children:"The base class provides default implementations for all methods:"}),"\n",(0,l.jsx)(n.h3,{id:"automatic-registration",children:"Automatic Registration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:"// Android\ninit {\n    PluginsRegistry.shared.register(this)\n}\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-swift",children:'// iOS\npublic init(name: String) {\n    self.name = name\n    self.id = "RNV_Plugin_\\(name)"\n    PluginsRegistry.shared.register(plugin: self)\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"automatic-cleanup-ios-only",children:"Automatic Cleanup (iOS only)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-swift",children:"deinit {\n    PluginsRegistry.shared.unregister(plugin: self)\n}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"default-implementations",children:"Default Implementations"}),"\n",(0,l.jsx)(n.p,{children:"All methods have sensible defaults:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Lifecycle methods: No-op implementations"}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"overrideSource"}),": Returns the original source unchanged"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"getDRMManager"}),": Returns ",(0,l.jsx)(n.code,{children:"null"})]}),"\n",(0,l.jsxs)(n.li,{children:["Factory methods (Android): Return ",(0,l.jsx)(n.code,{children:"null"})," (use defaults)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"shouldDisableCache"}),": Returns ",(0,l.jsx)(n.code,{children:"false"})]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"method-calling-order",children:"Method Calling Order"}),"\n",(0,l.jsx)(n.h3,{id:"source-processing-flow",children:"Source Processing Flow"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"overrideSource"})," - Called for each registered plugin in order"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"getDRMManager"})," - Called for each plugin until one returns non-null"]}),"\n",(0,l.jsx)(n.li,{children:"Factory methods (Android) - Called for each plugin until one returns non-null"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"lifecycle-flow",children:"Lifecycle Flow"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"View/Player creation methods called for all plugins"}),"\n",(0,l.jsx)(n.li,{children:"Source processing happens during playback"}),"\n",(0,l.jsx)(n.li,{children:"View/Player destruction methods called for all plugins"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,l.jsx)(n.h3,{id:"drm-plugin-not-found",children:"DRM Plugin Not Found"}),"\n",(0,l.jsx)(n.p,{children:"If no plugin provides a DRM manager when required:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:"// Android\nthrow LibraryError.DRMPluginNotFound\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-swift",children:"// iOS\nthrow LibraryError.DRMPluginNotFound.error()\n"})}),"\n",(0,l.jsx)(n.h3,{id:"best-practices",children:"Best Practices"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Return ",(0,l.jsx)(n.code,{children:"null"})," from optional methods when not providing custom behavior"]}),"\n",(0,l.jsx)(n.li,{children:"Handle weak reference nullability properly"}),"\n",(0,l.jsx)(n.li,{children:"Use appropriate error handling in async methods (iOS)"}),"\n",(0,l.jsx)(n.li,{children:"Log meaningful debug information"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"platform-differences-summary",children:"Platform Differences Summary"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Feature"}),(0,l.jsx)(n.th,{children:"Android"}),(0,l.jsx)(n.th,{children:"iOS"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Async Support"}),(0,l.jsx)(n.td,{children:"No"}),(0,l.jsx)(n.td,{children:"Yes (async/await)"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Media Factories"}),(0,l.jsx)(n.td,{children:"Full ExoPlayer support"}),(0,l.jsx)(n.td,{children:"Limited AVFoundation"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Cache Control"}),(0,l.jsx)(n.td,{children:"Yes"}),(0,l.jsx)(n.td,{children:"No"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Auto Cleanup"}),(0,l.jsx)(n.td,{children:"Manual"}),(0,l.jsx)(n.td,{children:"Automatic (deinit)"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Weak References"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"WeakReference<T>"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"Weak<T>"})})]})]})]})]})}function h(e={}){let{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}},6151:function(e,n,i){i.d(n,{R:()=>d,x:()=>c});var r=i(6540);let l={},s=r.createContext(l);function d(e){let n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:d(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);